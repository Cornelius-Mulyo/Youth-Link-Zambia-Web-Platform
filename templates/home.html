<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YouthLink Zambia Web Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-5">
    <h2 class="mb-4 text-center" style="color: #006600;">üåç StudentLink Zambia Opportunities</h2>
    <div class="text-end mb-4">
        <a href="/add" class="btn btn-success">+ Add New Opportunity</a>
    </div>

    {% for opp in opportunities %}
    <div class="card mb-3 shadow-sm">
        <div class="card-body">
            <h5 class="card-title" style="color: #007A33;">{{ opp[1] }}</h5>
            <p class="card-text">{{ opp[2] }}</p>

            {% if opp[3] %}
                <a href="{{ url_for('download_file', filename=opp[3]) }}"
                   class="btn btn-primary btn-sm" download>Download File</a>
                <a href="{{ url_for('view_file', filename=opp[3]) }}"
                   class="btn btn-info btn-sm" target="_blank">View File</a>
            {% endif %}

            <a href="{{ url_for('edit', opp_id=opp[0]) }}" class="btn btn-warning btn-sm">Edit</a>

            <form method="POST" action="{{ url_for('delete', opp_id=opp[0]) }}"
                  style="display:inline;"
                  onsubmit="return confirm('Are you sure you want to delete this opportunity?');">
                <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>

            <p class="card-text mt-2">
                <small class="text-muted">üìÖ Uploaded on: {{ opp[4] }}</small>
            </p>
        </div>
    </div>
    {% else %}
    <p>No opportunities found.</p>
    {% endfor %}
</div>
</body>
</html>
